<div class="container mx-auto p-8">
  <div class="bg-gray-800 p-6 rounded-lg shadow-lg flex items-center space-x-4">
    <img 
      [src]="user?.photo || 'assets/default-user.png'" 
      alt="User Photo" 
      class="w-16 h-16 rounded-full"
    />
    <h1 class="text-2xl font-bold text-gray-100">{{ user?.username }}</h1>
  </div>

  <!-- Información del usuario (solo lectura) -->
  <div *ngIf="!isEditing && user" class="bg-gray-800 p-6 rounded-lg shadow-lg mt-4">
    <p class="text-gray-300"><strong>Email:</strong> {{ user?.email }}</p>
    <p class="text-gray-300"><strong>Nombre:</strong> {{ user?.name }}</p>
    <p class="text-gray-300"><strong>Ciudad:</strong> {{ user?.city }}</p>
    <div class="mt-4">
      <div class="flex space-x-4">
        <a *ngFor="let rrss of user.rrss | keyvalue" [href]="rrss.value" target="_blank"
          class="text-blue-400 hover:underline">
          <fa-icon *ngIf="getIconForRrss(rrss.key, rrss.value)" 
                   [icon]="getIconForRrss(rrss.key, rrss.value)" 
                   class="text-2xl">
          </fa-icon>
        </a>
      </div>
    </div>
  </div>

  <!-- Formulario de edición -->
  <div *ngIf="isEditing && user" class="bg-gray-800 p-6 rounded-lg shadow-lg mt-4">
    <form (ngSubmit)="saveChanges()">
      <div class="mb-4">
        <label for="name" class="block text-sm font-bold mb-2">Nombre</label>
        <input
          id="name"
          [(ngModel)]="updatedUser.name"
          name="name"
          type="text"
          class="w-full p-2 rounded bg-gray-700 text-white"
          required
        />
      </div>
      <div class="mb-4">
        <label for="email" class="block text-sm font-bold mb-2">Email</label>
        <input
          id="email"
          [(ngModel)]="updatedUser.email"
          name="email"
          type="email"
          class="w-full p-2 rounded bg-gray-700 text-white"
          required
        />
      </div>
      <div class="mb-4">
        <label for="city" class="block text-sm font-bold mb-2">Ciudad</label>
        <input
          id="city"
          [(ngModel)]="updatedUser.city"
          name="city"
          type="text"
          class="w-full p-2 rounded bg-gray-700 text-white"
        />
      </div>

      <!-- Redes sociales -->
      <div class="mb-4">
        <label for="instagram" class="block text-sm font-bold mb-2">Instagram</label>
        <input
          id="instagram"
          [(ngModel)]="updatedUser.rrss.instagram"
          name="instagram"
          type="url"
          class="w-full p-2 rounded bg-gray-700 text-white"
          placeholder="https://instagram.com/tu-cuenta"
        />
      </div>
      <div class="mb-4">
        <label for="youtube" class="block text-sm font-bold mb-2">YouTube</label>
        <input
          id="youtube"
          [(ngModel)]="updatedUser.rrss.youtube"
          name="youtube"
          type="url"
          class="w-full p-2 rounded bg-gray-700 text-white"
          placeholder="https://youtube.com/tu-canal"
        />
      </div>
      <div class="mb-4">
        <label for="tiktok" class="block text-sm font-bold mb-2">TikTok</label>
        <input
          id="tiktok"
          [(ngModel)]="updatedUser.rrss.tiktok"
          name="tiktok"
          type="url"
          class="w-full p-2 rounded bg-gray-700 text-white"
          placeholder="https://tiktok.com/@tu-cuenta"
        />
      </div>

      <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
        Guardar Cambios
      </button>
    </form>
  </div>

  <!-- Botón circular para editar -->
  <button
    (click)="toggleEdit()"
    class="fixed bottom-4 right-4 bg-yellow-500 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg hover:bg-yellow-600"
    aria-label="Editar Usuario"
  >
    <fa-icon [icon]="icons.edit" class="text-xl"></fa-icon>
  </button>
</div>